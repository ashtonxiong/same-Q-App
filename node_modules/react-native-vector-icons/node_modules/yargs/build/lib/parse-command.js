<<<<<<< HEAD
export function parseCommand(cmd) {
=======
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseCommand = void 0;
function parseCommand(cmd) {
>>>>>>> 5b2c4effd1bf3fccca5e7c14270419348d8a8566
    const extraSpacesStrippedCommand = cmd.replace(/\s{2,}/g, ' ');
    const splitCommand = extraSpacesStrippedCommand.split(/\s+(?![^[]*]|[^<]*>)/);
    const bregex = /\.*[\][<>]/g;
    const firstCommand = splitCommand.shift();
    if (!firstCommand)
        throw new Error(`No command found in: ${cmd}`);
    const parsedCommand = {
        cmd: firstCommand.replace(bregex, ''),
        demanded: [],
<<<<<<< HEAD
        optional: [],
=======
        optional: []
>>>>>>> 5b2c4effd1bf3fccca5e7c14270419348d8a8566
    };
    splitCommand.forEach((cmd, i) => {
        let variadic = false;
        cmd = cmd.replace(/\s/g, '');
        if (/\.+[\]>]/.test(cmd) && i === splitCommand.length - 1)
            variadic = true;
        if (/^\[/.test(cmd)) {
            parsedCommand.optional.push({
                cmd: cmd.replace(bregex, '').split('|'),
<<<<<<< HEAD
                variadic,
=======
                variadic
>>>>>>> 5b2c4effd1bf3fccca5e7c14270419348d8a8566
            });
        }
        else {
            parsedCommand.demanded.push({
                cmd: cmd.replace(bregex, '').split('|'),
<<<<<<< HEAD
                variadic,
=======
                variadic
>>>>>>> 5b2c4effd1bf3fccca5e7c14270419348d8a8566
            });
        }
    });
    return parsedCommand;
}
<<<<<<< HEAD
=======
exports.parseCommand = parseCommand;
>>>>>>> 5b2c4effd1bf3fccca5e7c14270419348d8a8566
